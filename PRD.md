# 產品需求文件 (PRD) - 台北市嘉禾社區費用管理系統

## 1. 產品概述
本系統旨在提供台北市嘉禾社區管理員便捷的費用登記與查詢流程，並讓住戶能即時確認其繳費明細。

## 2. 目標用戶
- **社區管理員**: 負責登記住戶繳費、管理車位租用狀況。
- **社區主委**: 具備權限可修正/覆蓋過往錯誤紀錄。
- **一般住戶**: 可依據地址查詢自家的繳費歷史。

## 3. 核心功能需求

### 3.1 住戶查詢網頁 (Resident Portal)
- **地址定位**: 透過「號碼」、「後綴 (如 -1, -2)」、「樓層」精確篩選。
- **明細顯示**: 條列過往所有已登記的繳費紀錄（管理費、機車費、汽車費其起訖範圍）。
- **後綴邏輯**: 
    - 13、15、17、19 號僅限「(無)」及「1」。
    - 21、23 號支援 「(無)」、「1」、「2」、「3」。

### 3.2 管理後台 (Admin Portal)
- **費用登記**:
    - **管理費**: 固定 $800/月。
    - **機車位**: 小 ($100), 大 ($200)。
    - **汽車位**: 小 ($1200), 大 ($1800)。
- **日期邏輯 (重點)**:
    - **起訖驗證**: 繳費結算年月必須「等於或晚於」起算年月。
    - **異常處理**: 若輸入非法範圍，系統會自動歸位為同月份，並顯示**紅色警示文字**與**紅色輸入邊框**。
    - **自動遞延**: 進入新月份時，若原有週期已過，系統自動將預覽起算月設為當前月份。
- **主委模式**: 
    - 預設模式會鎖定已繳費月份。
    - 開啟「主委權限」後可繞過鎖定限制，進行糾紛調解與紀錄修正。

## 4. 非功能性需求
- **資料儲存**: 使用瀏覽器 `localStorage` 提供輕量化持久化儲存。
- **列印支援**: 登記完成後自動產出符合收據格式的列印預覽，隱藏不必要的 UI 元素（no-print）。
- **響應式設計**: 支援電腦與平板操作。

## 5. 技術架構
- **前端框架**: React 19 + TypeScript.
- **樣式工具**: Tailwind CSS.
- **建置工具**: Vite 6.
- **部署流程**: GitHub Actions (Native Pages Deployment).
